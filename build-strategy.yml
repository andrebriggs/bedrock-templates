parameters:
- name: ImageName # name of the parameter; required
  type: string # data type of the parameter; required
- name: ImageTag
  type: string
    # ImageName: ''
    # ImageTag: ''
    # BuildArgs: []
steps:
- script: |-
    echo ${{ parameters.ImageName }}
    echo ${{ parameters.ImageTag }}
    echo $(System.DefaultWorkingDirectory)
    cd $(System.DefaultWorkingDirectory)
    ls -la
    sudo chmod +x build-strategy.sh
- task: Bash@3
  inputs:
    # targetType: 'filePath'
    script: build-strategy.sh
  env:
    IMAGE_TAG: ${{ parameters.ImageTag }}
    BUILD_REPO_NAME: ${{ parameters.ImageName }}

#     if [ -z "${{ parameters.ImageTag }}" ]
#     then
#         echo "No ImageTag provided"
#         export IMAGE_TAG=$(echo $(Build.BuildNumber) | tr / - | tr . - | tr _ - )
#     else
#         echo "ImageTag is NOT empty"
#         export IMAGE_TAG=$(echo ${{ parameters.ImageTag }} | tr / - | tr . - | tr _ - )
#     fi
#     export BUILD_REPO_NAME=$(echo ${{ parameters.ImageName }} | tr '[:upper:]' '[:lower:]')
#     export IMAGE_NAME=$BUILD_REPO_NAME:$IMAGE_TAG
#     echo ${{ parameters.ImageName }}
#     echo ${{ parameters.ImageTag }}
#     echo $IMAGE_NAME