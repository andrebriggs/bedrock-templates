parameters:
- name: ImageName # name of the parameter; required
  type: string # data type of the parameter; required
- name: ImageTag
  type: string
- name: BuildArgs
  type: object
steps:
# - ${{ each item in parameters.BuildArgs }}:
#     - script: |-
#         echo $pair
  - ${{ each item in parameters.BuildArgs }}:
    - script: |-
      echo ${{ $item.ArgName }}
      echo ${{ $item.ArgValue }}
- script: |-
    echo ${{ parameters.ImageName }}
    echo ${{ parameters.ImageTag }}
    echo BuildArgs: ${{join(' ',parameters.BuildArgs)}}
    echo $(System.DefaultWorkingDirectory)
    cd $(System.DefaultWorkingDirectory)
    ls -la
    sudo chmod +x build-strategy.sh
- task: Bash@3
  inputs:
    # targetType: 'filePath'
    filePath: build-strategy.sh
  env:
    IMAGE_TAG: ${{ parameters.ImageTag }}
    BUILD_REPO_NAME: ${{ parameters.ImageName }}